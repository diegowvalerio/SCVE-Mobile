package net.ddns.scvemarchezanmetais.scvemobile.activitys;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;

import net.ddns.scvemarchezanmetais.scvemobile.R;
import net.ddns.scvemarchezanmetais.scvemobile.banco.DatabaseHelper;
import net.ddns.scvemarchezanmetais.scvemobile.dao.DAOProduto;
import net.ddns.scvemarchezanmetais.scvemobile.entidades.Produto;

import java.sql.SQLException;

public class Formulario_Produto extends AppCompatActivity {

    EditText codigo,descricao,abreviada,ean;
    Produto produto = new Produto();
    DatabaseHelper dh;
    DAOProduto daoProduto;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_formulario__produto);

        codigo = findViewById(R.id.pcod);
        descricao = findViewById(R.id.pdesc);
        abreviada = findViewById(R.id.pdesca);
        ean = findViewById(R.id.pean);

        Bundle bundle = getIntent().getExtras();
        if (bundle!=null && bundle.containsKey("idproduto")) {
            dh = new DatabaseHelper(Formulario_Produto.this);
            try {
                daoProduto = new DAOProduto(dh.getConnectionSource());
            } catch (SQLException e) {
                e.printStackTrace();
            }

            try {
                produto = daoProduto.queryForId(bundle.getInt("idproduto"));

                codigo.setText(produto.getIdproduto().toString());
                descricao.setText(produto.getDescricao());
                abreviada.setText(produto.getDescabreviada());
                ean.setText(produto.getEan());

                codigo.setEnabled(false);
                descricao.setEnabled(false);
                abreviada.setEnabled(false);
                ean.setEnabled(false);

            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

    }
}
