package net.ddns.scvemarchezanmetais.scvemobile.adapters;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

import net.ddns.scvemarchezanmetais.scvemobile.R;
import net.ddns.scvemarchezanmetais.scvemobile.entidades.ListaPrecoItem;
import net.ddns.scvemarchezanmetais.scvemobile.entidades.TipoMvVend;

import java.util.ArrayList;
import java.util.List;

public class ADP_Produtos_Tabelas extends BaseAdapter {
    Context contexto;
    List<TipoMvVend> tipoMvVends;
    String idproduto;

    public ADP_Produtos_Tabelas(Context contexto, List<TipoMvVend> tipoMvVends, String idproduto) {
        this.contexto = contexto;
        this.tipoMvVends = tipoMvVends;
        this.idproduto = idproduto;
    }

    @Override
    public int getCount() {
        return tipoMvVends.size();
    }

    @Override
    public Object getItem(int position) {
        return tipoMvVends.get(position);
    }

    @Override
    public long getItemId(int position) {
        return tipoMvVends.get(position).getIdtipomvvendmobile();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View viewLinha = LayoutInflater.from(contexto).inflate(R.layout.linha_produtos_tabelapreco,parent,false);
        TextView tipo = (TextView) viewLinha.findViewById(R.id.p_tipopedido);
        TextView lista = (TextView) viewLinha.findViewById(R.id.p_tabelapreco);
        TextView valor = (TextView) viewLinha.findViewById(R.id.p_valor);
        TextView listaP = (TextView) viewLinha.findViewById(R.id.p_promocao);
        TextView valorP = (TextView) viewLinha.findViewById(R.id.p_valorpromocao);


        TipoMvVend tipoMvVend = tipoMvVends.get(position);
        List<ListaPrecoItem> listaPrecoItem = new ArrayList<>();
        listaPrecoItem.addAll(tipoMvVend.getListapreco().getListaprecoitens());
        for(ListaPrecoItem listaPrecoItem1 : listaPrecoItem){
            if(listaPrecoItem1.getProduto().getIdproduto().toString().equals(idproduto)){
               valor.setText(Double.toString(listaPrecoItem1.getValor()));
            }
        }
        tipo.setText(tipoMvVend.getTipomv().getNome().toString());
        lista.setText(tipoMvVend.getListapreco().getNome().toString());

        List<ListaPrecoItem> listaPrecoItemP = new ArrayList<>();
        listaPrecoItemP.addAll(tipoMvVend.getListaprecopromocao().getListaprecoitens());
        for(ListaPrecoItem listaPrecoItem2 : listaPrecoItemP){
            if(listaPrecoItem2.getProduto().getIdproduto().toString().equals(idproduto)){
                valorP.setText(Double.toString(listaPrecoItem2.getValor()));
            }
        }
        listaP.setText(tipoMvVend.getListaprecopromocao().getNome().toString());

        /*tipo.setEnabled(false);
        lista.setEnabled(false);
        valor.setEnabled(false);
        listaP.setEnabled(false);
        valorP.setEnabled(false);*/

        tipo.setFocusable(false);
        lista.setFocusable(false);
        valor.setFocusable(false);
        listaP.setFocusable(false);
        valorP.setFocusable(false);

        return viewLinha;
    }
}

