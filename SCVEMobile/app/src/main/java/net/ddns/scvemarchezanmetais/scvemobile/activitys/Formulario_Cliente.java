package net.ddns.scvemarchezanmetais.scvemobile.activitys;

import android.graphics.Color;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TabHost;

import net.ddns.scvemarchezanmetais.scvemobile.R;
import net.ddns.scvemarchezanmetais.scvemobile.banco.DatabaseHelper;
import net.ddns.scvemarchezanmetais.scvemobile.dao.DAOPessoa;
import net.ddns.scvemarchezanmetais.scvemobile.entidades.Pessoa;

import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Formulario_Cliente extends AppCompatActivity {

    EditText p_nome, p_dtcadastro, f_cpf,f_rg, f_dtnasc, j_cnpj,j_razaosocial,j_inscestadual,j_suframa;
    Date pcadastro;
    String formato = "dd/MM/yyyy";
    Pessoa pessoa = new Pessoa();
    DatabaseHelper dh;
    DAOPessoa daoPessoa;
    TabHost tabHost;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_formulario__cliente);

        tabHost = findViewById(R.id.tabhost);
        tabHost.setup();

        TabHost.TabSpec tfisica = tabHost.newTabSpec("Fisíca");
        tfisica.setContent(R.id.Fisíca);
        tfisica.setIndicator("Fisíca");

        TabHost.TabSpec tjuridica = tabHost.newTabSpec("Jurídica");
        tjuridica.setContent(R.id.Jurídica);
        tjuridica.setIndicator("Jurídica");

        tabHost.addTab(tfisica);
        tabHost.addTab(tjuridica);

        tabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {
                // TODO Auto-generated method stub
                for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
                    tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#FFFFFF")); //unselected
                }
                tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundColor(Color.parseColor("#FF3F51B5")); // selected
            }
        });

        p_nome = findViewById(R.id.p_nome);
        p_dtcadastro = findViewById(R.id.p_dtcadastro);
        f_cpf = findViewById(R.id.f_cpf);
        f_rg = findViewById(R.id.f_rg);
        f_dtnasc = findViewById(R.id.f_dtnascimento);
        j_cnpj = findViewById(R.id.j_cnpj);
        j_inscestadual = findViewById(R.id.j_inscestadual);
        j_razaosocial = findViewById(R.id.j_razaosocial);
        j_suframa = findViewById(R.id.j_suframa);

        Bundle bundle = getIntent().getExtras();
        if (bundle!=null && bundle.containsKey("idpessoa")){
            dh = new DatabaseHelper(Formulario_Cliente.this);
            try {
                daoPessoa = new DAOPessoa(dh.getConnectionSource());
            }catch (SQLException e){
                e.printStackTrace();
            }

            try {
                pessoa = daoPessoa.queryForId(bundle.getInt("idpessoa"));

                p_nome.setText(pessoa.getNome());
                SimpleDateFormat formatter = new SimpleDateFormat(formato);
                p_dtcadastro.setText(formatter.format(pessoa.getDtcadastro()));

            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

    }
}
